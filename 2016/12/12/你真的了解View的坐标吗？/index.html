<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>你真的了解View的坐标吗？ | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="文章首发CSDN地址 :
闲聊View，对我们来说在熟悉不过了，从接触Android开始，我们就一直在接触View，界面当中到处都是 View，比如我们经常用到的TextView，Button，LinearLayout等等，但是我们真的了解View吗？尤其是View的坐标。mLeft,mRight,mY,mX,mTranslationY,mScoollY,相对于屏幕的坐标等等这些概念你真的清楚了吗">
<meta property="og:type" content="article">
<meta property="og:title" content="你真的了解View的坐标吗？">
<meta property="og:url" content="http://example.com/2016/12/12/你真的了解View的坐标吗？/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="文章首发CSDN地址 :
闲聊View，对我们来说在熟悉不过了，从接触Android开始，我们就一直在接触View，界面当中到处都是 View，比如我们经常用到的TextView，Button，LinearLayout等等，但是我们真的了解View吗？尤其是View的坐标。mLeft,mRight,mY,mX,mTranslationY,mScoollY,相对于屏幕的坐标等等这些概念你真的清楚了吗">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/9fe4afa0gw1faog7dpkajj20a90i70ty.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/9fe4afa0jw1faplvwpqj3j207c06aaa5.jpg">
<meta property="og:updated_time" content="2016-12-24T02:57:35.750Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="你真的了解View的坐标吗？">
<meta name="twitter:description" content="文章首发CSDN地址 :
闲聊View，对我们来说在熟悉不过了，从接触Android开始，我们就一直在接触View，界面当中到处都是 View，比如我们经常用到的TextView，Button，LinearLayout等等，但是我们真的了解View吗？尤其是View的坐标。mLeft,mRight,mY,mX,mTranslationY,mScoollY,相对于屏幕的坐标等等这些概念你真的清楚了吗">
<meta name="twitter:image" content="http://ww2.sinaimg.cn/large/9fe4afa0gw1faog7dpkajj20a90i70ty.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-你真的了解View的坐标吗？" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/12/你真的了解View的坐标吗？/" class="article-date">
  <time datetime="2016-12-12T15:05:59.000Z" itemprop="datePublished">2016-12-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      你真的了解View的坐标吗？
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://blog.csdn.net/gdutxiaoxu/article/details/53700020" target="_blank" rel="external">文章首发CSDN地址 :</a></p>
<h2 id="闲聊"><a href="#闲聊" class="headerlink" title="闲聊"></a>闲聊</h2><p>View，对我们来说在熟悉不过了，从接触Android开始，我们就一直在接触View，界面当中到处都是 View，比如我们经常用到的TextView，Button，LinearLayout等等，但是我们真的了解View吗？尤其是View的坐标。mLeft,mRight,mY,mX,mTranslationY,mScoollY,相对于屏幕的坐标等等这些概念你真的清楚了吗？如果真的清楚了，那你没有必要读这篇博客，如果你还是有一些模糊，建议花上几分钟的时间读一下。</p>
<p>为什么要写这一篇博客呢？</p>
<p>因为掌握View的坐标很重要，尤其是对于自定义View，学习动画有重大的意义。</p>
<p>这篇博客主要讲解一下问题</p>
<ul>
<li>View 的 getLeft（）和get Right（）和  getTop（） 和getBottom（）</li>
<li>View 的 getＹ（）， getTranslationY() 和 getTop（） 之间的联系</li>
<li>View 的  getScroolY  和 View 的 scrollTo() 和 scrollBy（）</li>
<li>event.getY 和  event.getRawY()</li>
<li>扩展，怎样获取状态栏（StatusBar）和标题栏（titleBar）的高度</li>
</ul>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p><img src="http://ww2.sinaimg.cn/large/9fe4afa0gw1faog7dpkajj20a90i70ty.jpg" alt=""></p>
<p> 简单说明一下（上图Activity采用默认Style，状态栏和标题栏都会显示）：最大的草绿色区域是屏幕界面，红色次大区域我们称之为“应用界面区域”，最小紫色的区域我们称之为“View绘制区域”；屏幕顶端、应用界面区之外的那部分显示手机电池网络运营商信息的为“状态栏”，应用区域顶端、View绘制区外部显示Activity名称的部分我们称为“标题栏”。</p>
<p>从这张图片我们可以看到<br>在Android中，当ActionBar存在的情况下，</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">屏幕的 高度=状态栏+应用区域的高度=状态栏的 高度+（标题栏的 高度+<span class="keyword">View</span> 绘制区域的高度）</div></pre></td></tr></table></figure>
<p>当ActionBar不存在的情况下</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">屏幕的高度=状态栏+应用区域的高度=状态栏的 高度+（<span class="keyword">View</span> 绘制区域的 高度）</div></pre></td></tr></table></figure>
<h2 id="View-的-getLeft（）和getRight（）和-getTop（）-和getBottom（）"><a href="#View-的-getLeft（）和getRight（）和-getTop（）-和getBottom（）" class="headerlink" title="View 的 getLeft（）和getRight（）和  getTop（） 和getBottom（）"></a>View 的 getLeft（）和getRight（）和  getTop（） 和getBottom（）</h2><figure class="highlight sml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="type">View</span>.getLeft<span class="literal">()</span> ;</div><div class="line"><span class="type">View</span>.getTop<span class="literal">()</span> ;</div><div class="line"><span class="type">View</span>.getBottom<span class="literal">()</span>;</div><div class="line"><span class="type">View</span>.getRight<span class="literal">()</span> ;</div></pre></td></tr></table></figure>
<p>top是左上角纵坐标，left是左上角横坐标，right是右下角横坐标，bottom是右下角纵坐标,都是相对于它的<strong>直接父View</strong>而言的，而不是相对于<strong>屏幕</strong>而言的。这一点要区分清楚。那那个坐标是相对于屏幕而言的呢，以及要怎样获取相对于屏幕的坐标呢？</p>
<p>目前View里面的变量还没有一个是相对于屏幕而言的，但是我们可以获取到相对于屏幕的坐标。一般来说，我们要获取View的坐标和高度 等，都必须等到View绘制完毕以后才能获取的到，在Activity 的 onCreate（）方法 里面 是获取不到的，必须 等到View绘制完毕以后才能获取地到View的响应的坐标，一般来说，主要 有以下两种方法。</p>
<p>第一种方法，onWindowFocusChanged（）方法里面进行调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">   <span class="meta">@Override</span></div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onWindowFocusChanged</span><span class="params">(<span class="keyword">boolean</span> hasFocus)</span> </span>&#123;</div><div class="line">  <span class="keyword">super</span>.onWindowFocusChanged(hasFocus); </div><div class="line">  <span class="comment">//确保只会调用一次</span></div><div class="line">   <span class="keyword">if</span>(first)&#123;</div><div class="line">     first=<span class="keyword">false</span>;</div><div class="line">     <span class="keyword">final</span> <span class="keyword">int</span>[] location = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];     </div><div class="line">     mView.getLocationOnScreen(location);</div><div class="line">     <span class="keyword">int</span> x1 = location[<span class="number">0</span>]  ;</div><div class="line">     <span class="keyword">int</span> y1 = location[<span class="number">1</span>]  ;</div><div class="line">     Log.i(TAG, <span class="string">"onCreate: x1="</span> +x1);</div><div class="line">     Log.i(TAG, <span class="string">"onCreate: y1="</span> +y1);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第二种方法，在视图树绘制完成的时候进行测量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mView.getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">new</span> ViewTreeObserver</div><div class="line">        .OnGlobalLayoutListener() &#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGlobalLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//   移除监听器，确保只会调用一次，否则在视图树发挥改变的时候又会调用</span></div><div class="line">        mView.getViewTreeObserver().removeGlobalOnLayoutListener(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span>[] location = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">        mView.getLocationOnScreen(location);</div><div class="line">        <span class="keyword">int</span> x1 = location[<span class="number">0</span>];</div><div class="line">        <span class="keyword">int</span> y1 = location[<span class="number">1</span>];</div><div class="line">        Log.i(TAG, <span class="string">"onCreate: x1="</span> + x1);</div><div class="line">        Log.i(TAG, <span class="string">"onCreate: y1="</span> + y1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="View-的-getY（），-getTranslationY-和-getTop（）-之间的联"><a href="#View-的-getY（），-getTranslationY-和-getTop（）-之间的联" class="headerlink" title="View 的 getＹ（）， getTranslationY() 和 getTop（） 之间的联"></a>View 的 getＹ（）， getTranslationY() 和 getTop（） 之间的联</h2><p>getＹ（）</p>
<blockquote>
<p>Added in API level 14<br>The visual y position of this view, in pixels.(返回的是View视觉上的图标，即我们眼睛看到位置的Y坐标，注意也是相对于<strong>直接父View</strong>而言的默认值跟getTop（）相同，别急，下面会解释）</p>
</blockquote>
<p>getTranslationY()</p>
<blockquote>
<p>Added in API level 14<br>The vertical position of this view relative to its top position, in pixels.(竖直方向上相对于top的偏移量，默认值为0）</p>
</blockquote>
<p>那 getY（） 和 getTranslationY（） 和 getTop （） 到底有什么关系呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ViewDebug</span>.ExportedProperty(category = <span class="string">"drawing"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getY</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> mTop + getTranslationY();</div><div class="line">&#125;</div><div class="line"></div><div class="line">    <span class="meta">@ViewDebug</span>.ExportedProperty(category = <span class="string">"drawing"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTranslationY</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mRenderNode.getTranslationY();</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@ViewDebug</span>.<span class="function">CapturedViewProperty</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getTop</span><span class="params">()</span> &#123;</div><div class="line">        <span class="keyword">return</span> mTop;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>从以上的源码我们可以知道 getY（）= getTranslationY（）+ getTop （），而 getTranslationY（） 的默认值是0，除非我们通过 setTranlationY（） 来改变它，这也就是我们上面上到的 getY 默认值跟 getTop（）相同</p>
<p>那我们要怎样改变 top值 和 Y 值呢？ 很明显就是调用相应的set方法 ，即 setY（） 和setTop（） ，就可以改变他们 的值。</p>
<h2 id="View-的-getScroolY-和-View-的-scrollTo-和-scrollBy（）"><a href="#View-的-getScroolY-和-View-的-scrollTo-和-scrollBy（）" class="headerlink" title="View 的  getScroolY  和 View 的 scrollTo() 和 scrollBy（）"></a>View 的  getScroolY  和 View 的 scrollTo() 和 scrollBy（）</h2><p>getScrollY是一个比较特别的函数，因为它涉及一个值叫mScrollY，简单说，getScrollY一般得到的都是0，除非你调用过scrollTo或scrollBy这两个函数来改变它。</p>
<h3 id="scrollTo-和-scrollBy（）"><a href="#scrollTo-和-scrollBy（）" class="headerlink" title="scrollTo() 和 scrollBy（）"></a>scrollTo() 和 scrollBy（）</h3><p>从字面意思我们可以知道 scrollTo() 是滑动到哪里的意思 ，scrollBy（）是相对当前的位置滑动了多少。当然这一点在源码中也是可以体现出来的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scrollTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (mScrollX != x || mScrollY != y) &#123;</div><div class="line">        <span class="keyword">int</span> oldX = mScrollX;</div><div class="line">        <span class="keyword">int</span> oldY = mScrollY;</div><div class="line">        mScrollX = x;</div><div class="line">        mScrollY = y;</div><div class="line">        invalidateParentCaches();</div><div class="line">        onScrollChanged(mScrollX, mScrollY, oldX, oldY);</div><div class="line">        <span class="keyword">if</span> (!awakenScrollBars()) &#123;</div><div class="line">            postInvalidateOnAnimation();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scrollBy</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    scrollTo(mScrollX + x, mScrollY + y);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>有几点需要注意的是</p>
<ul>
<li>不论是scrollTo或scrollBy，其实都是对View的内容进行滚动而不是对View本身，你可以做个小实验，一个LinearLayouy背景是黄色，里面放置一个子LinearLayout背景是蓝色，调用scrollTo或scrollBy，移动的永远是蓝色的子LinearLayout。</li>
<li>还有就是scrollTo和scrollBy函数的参数和坐标系是“相反的”，比如scrollTo(-100,0)，View的内容是向X轴正方向移动的，这个相反打引号是因为并不是真正的相反，具体可以看源码，关于这两个函数的源码分析大家可以看<a href="http://blog.csdn.net/xplee0576/article/details/24242383?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Android——源码角度分析View的scrollBy()和scrollTo()的参数正负问题</a>，一目了然。</li>
</ul>
<h2 id="View-的-width-和-height"><a href="#View-的-width-和-height" class="headerlink" title="View 的 width 和 height"></a>View 的 width 和 height</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ViewDebug</span>.ExportedProperty(category = <span class="string">"layout"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> mBottom - mTop;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们可以看到 Android的 height 是由 mBottom  和 mTop 共同得出的，那我们要怎样设置Android的高度呢？有人会说直接在xml里面设置 android:height=””  不就OK了，那我们如果要动态设置height的高度呢，怎么办？你可能会想到 setWidth（）方法？但是我们找遍了View的所有方法，都没有发现 setWidth（）方法，那要怎样动态设置height呢？其实有两种方法</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="built_in">int</span> <span class="built_in">width</span>=<span class="number">50</span>;</div><div class="line"><span class="built_in">int</span> <span class="built_in">height</span>=<span class="number">100</span>;</div><div class="line">ViewGroup.LayoutParams layoutParams = view.getLayoutParams();</div><div class="line"><span class="keyword">if</span>(layoutParams==<span class="keyword">null</span>)&#123;</div><div class="line">    layoutParams=<span class="keyword">new</span> ViewGroup.LayoutParams(<span class="built_in">width</span>,<span class="built_in">height</span>);</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    layoutParams.<span class="built_in">height</span>=<span class="built_in">height</span>;</div><div class="line">&#125;</div><div class="line">view.setLayoutParams(layoutParams);</div></pre></td></tr></table></figure>
<p>第二种方法，单独地改变top或者bottom的值，这种方法不推荐使用</p>
<p>至于width，它跟height基本一样，只不过它是有mRight 和mLeft 共同决定而已。</p>
<p>需要注意的是，平时我们在执行动画的过程，不推荐使用LayoutParams来改变View的状态，因为改变LayoutParams会调用requestLayout（）方法，会标记当前View及父容器，同时逐层向上提交，直到ViewRootImpl处理该事件，ViewRootImpl会调用三大流程，从measure开始，对于每一个含有标记位的view及其子View都会进行测量、布局、绘制，性能较差，源码体现如下：关于requestLayout （）方法的更多分析可以查看这一篇博客<a href="http://blog.csdn.net/a553181867/article/details/51583060" target="_blank" rel="external">Android View 深度分析requestLayout、invalidate与postInvalidate</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLayoutParams</span>(<span class="params">ViewGroup.LayoutParams <span class="keyword">params</span></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">params</span> == <span class="literal">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"Layout parameters cannot be null"</span>);</div><div class="line">    &#125;</div><div class="line">    mLayoutParams = <span class="keyword">params</span>;</div><div class="line">    resolveLayoutParams();</div><div class="line">    <span class="keyword">if</span> (mParent instanceof ViewGroup) &#123;</div><div class="line">        ((ViewGroup) mParent).onSetLayoutParams(<span class="keyword">this</span>, <span class="keyword">params</span>);</div><div class="line">    &#125;</div><div class="line">    requestLayout();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>因此我们如果在api 14 以后 ，在动画执行过程中，要改变View的状态，推荐使用setTranslationY（）和setTranslationX（0等方法，而 尽量避免改变LayoutParams.因为性能嫌贵来说较差。</p>
<h2 id="event-getY-和-event-getRawY"><a href="#event-getY-和-event-getRawY" class="headerlink" title="event.getY() 和  event.getRawY()"></a>event.getY() 和  event.getRawY()</h2><p> 要区分于MotionEvent.getRawX() 和MotionEvent.getX();,</p>
<p>在public boolean onTouch(View view, MotionEvent event) 中，当你触到控件时，x,y是相对于该控件左上点（控件本身）的相对位置。 而rawx,rawy始终是相对于屏幕的位置。getX()是表示Widget相对于自身左上角的x坐标,而getRawX()是表示相对于屏幕左上角的x坐标值 (注意:这个屏幕左上角是手机屏幕左上角,不管activity是否有titleBar或是否全屏幕)。</p>
<p><img src="http://ww4.sinaimg.cn/large/9fe4afa0jw1faplvwpqj3j207c06aaa5.jpg" alt=""></p>
<h2 id="扩展，怎样获取状态栏（StatusBar）和标题栏（titleBar）的高度"><a href="#扩展，怎样获取状态栏（StatusBar）和标题栏（titleBar）的高度" class="headerlink" title="扩展，怎样获取状态栏（StatusBar）和标题栏（titleBar）的高度"></a>扩展，怎样获取状态栏（StatusBar）和标题栏（titleBar）的高度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> public void onWindowFocusChanged(boolean hasFocus) &#123;</div><div class="line">    super.onWindowFocusChanged(hasFocus);</div><div class="line"></div><div class="line">    //屏幕</div><div class="line">    DisplayMetrics dm = new DisplayMetrics();</div><div class="line">    getWindowManager().getDefaultDisplay().getMetrics(dm);</div><div class="line">    Log.e(TAG, &quot;屏幕高:&quot; + dm.heightPixels);</div><div class="line"></div><div class="line">    //应用区域</div><div class="line">    Rect outRect1 = new Rect();</div><div class="line">    getWindow().getDecorView().getWindowVisibleDisplayFrame(outRect1);</div><div class="line">    //这个也就是状态栏的 高度</div><div class="line">    Log.e(TAG, &quot;应用区顶部&quot; + outRect1.top);</div><div class="line">    </div><div class="line">    Log.e(TAG, &quot;应用区高&quot; + outRect1.height());</div><div class="line">    </div><div class="line">    // 这个方法必须在有actionBar的情况下才能获取到状态栏的高度</div><div class="line">    //View绘制区域</div><div class="line">    Rect outRect2 = new Rect();</div><div class="line">    getWindow().findViewById(Window.ID_ANDROID_CONTENT).getDrawingRect(outRect2);</div><div class="line">    Log.e(TAG, &quot;View绘制区域顶部-错误方法：&quot; + outRect2.top);   //不能像上边一样由outRect2.top获取，这种方式获得的top是0，可能是bug吧</div><div class="line">    Log.e(TAG, &quot;View绘制区域高度：&quot; + outRect2.height());</div><div class="line"></div><div class="line">    int viewTop = getWindow().findViewById(Window.ID_ANDROID_CONTENT).getTop();   //要用这种方法</div><div class="line">    Log.e(TAG, &quot;View绘制区域顶部-正确方法：&quot; + viewTop);</div><div class="line"></div><div class="line">    int titleBarHeight=viewTop;</div><div class="line"></div><div class="line">    Log.d(TAG, &quot;onWindowFocusChanged: 标题栏高度titleBarHeight=&quot; +titleBarHeight);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里我们需要注意的 是在ActionBar存在的情况下，通过这种方法我们才能够得出titleBar的高度，否则是无法得到的，因为viewTop 为0.</p>
<hr>
<p>这篇博客到此为止，关于更多自定义View 的一些例子，可以看我以下的博客 </p>
<p><a href="http://blog.csdn.net/gdutxiaoxu/article/details/51765428" target="_blank" rel="external"><strong>常用的自定义View例子一(FlowLayout)</strong></a></p>
<p><a href="http://blog.csdn.net/gdutxiaoxu/article/details/51772308" target="_blank" rel="external"><strong>自定义View常用例子二（点击展开隐藏控件，九宫格图片控件）</strong></a></p>
<p><a href="http://blog.csdn.net/gdutxiaoxu/article/details/51804844" target="_blank" rel="external"><strong>常用的自定义View例子三（MultiInterfaceView多界面处理）</strong></a></p>
<p><a href="http://blog.csdn.net/gdutxiaoxu/article/details/51804865" target="_blank" rel="external"><strong>常用的自定义控件四（QuickBarView）</strong></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/12/12/你真的了解View的坐标吗？/" data-id="cixdcc02l000m7gucrhrll1wh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/12/31/16年，平凡而又收获的一年/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          16年，平凡而又收获的一年
        
      </div>
    </a>
  
  
    <a href="/2016/12/11/手把手教你用Hexo-Github-搭建属于自己的博客/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">手把手教你用Hexo+Github 搭建属于自己的博客</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/6-0权限管理/">6.0权限管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FlowLayout/">FlowLayout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Retrofit/">Retrofit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/启动相册/">启动相册</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/启动系统相机/">启动系统相机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建个人博客/">搭建个人博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/流布式布局/">流布式布局</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自定义控件/">自定义控件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/6-0权限管理/" style="font-size: 10px;">6.0权限管理</a> <a href="/tags/FlowLayout/" style="font-size: 10px;">FlowLayout</a> <a href="/tags/Retrofit/" style="font-size: 10px;">Retrofit</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/启动相册/" style="font-size: 10px;">启动相册</a> <a href="/tags/启动系统相机/" style="font-size: 10px;">启动系统相机</a> <a href="/tags/搭建个人博客/" style="font-size: 10px;">搭建个人博客</a> <a href="/tags/流布式布局/" style="font-size: 10px;">流布式布局</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/自定义控件/" style="font-size: 10px;">自定义控件</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/31/16年，平凡而又收获的一年/">16年，平凡而又收获的一年</a>
          </li>
        
          <li>
            <a href="/2016/12/12/你真的了解View的坐标吗？/">你真的了解View的坐标吗？</a>
          </li>
        
          <li>
            <a href="/2016/12/11/手把手教你用Hexo-Github-搭建属于自己的博客/">手把手教你用Hexo+Github 搭建属于自己的博客</a>
          </li>
        
          <li>
            <a href="/2016/12/11/git-ssh-配置多个账户/">git ssh 配置多个账户</a>
          </li>
        
          <li>
            <a href="/2016/12/11/Git-ssh-配置及使用/">Git ssh 配置及使用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>